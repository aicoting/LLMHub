# åŸºç¡€çŸ¥è¯†ç‚¹
## æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸çš„åŽŸå› æ˜¯ä»€ä¹ˆ  
### é—®é¢˜åˆ†æž
æ¢¯åº¦æ¶ˆå¤±ï¼ˆVanishing Gradientï¼‰å’Œæ¢¯åº¦çˆ†ç‚¸ï¼ˆExploding Gradientï¼‰æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨æ·±å±‚ç¥žç»ç½‘ç»œä¸­åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæ¢¯åº¦åœ¨å¤šå±‚ä¼ æ’­æ—¶é€æ¸ç¼©å°æˆ–æ”¾å¤§çš„é—®é¢˜ï¼Œå¯¼è‡´æ¨¡åž‹éš¾ä»¥æœ‰æ•ˆè®­ç»ƒã€‚

#### **1. æ¢¯åº¦æ¶ˆå¤±çš„åŽŸå› **
+ **é“¾å¼æ³•åˆ™ç´¯ä¹˜å¯¼è‡´æ¢¯åº¦è¶‹è¿‘äºŽ0**  
åœ¨åå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦æ˜¯å„å±‚å¯¼æ•°çš„è¿žä¹˜ã€‚å¦‚æžœæ¿€æ´»å‡½æ•°ï¼ˆå¦‚sigmoidæˆ–tanhï¼‰çš„å¯¼æ•°å°äºŽ1ï¼Œè¿žç»­ç›¸ä¹˜åŽæ¢¯åº¦è¿…é€Ÿè¶‹è¿‘0ï¼Œå¯¼è‡´å‰é¢å±‚å‡ ä¹Žä¸æ›´æ–°ï¼ˆå­¦ä¹ åœæ»žï¼‰ã€‚
+ **æ¿€æ´»å‡½æ•°é¥±å’Œ**  
æ¯”å¦‚sigmoidåœ¨è¾“å…¥è¿‡å¤§æˆ–è¿‡å°æ—¶æ¢¯åº¦æŽ¥è¿‘0ï¼Œè¿›ä¸€æ­¥åŠ å‰§æ¢¯åº¦æ¶ˆå¤±ã€‚
+ **æƒé‡åˆå§‹åŒ–ä¸åˆç†**  
åˆå§‹åŒ–æƒé‡è¿‡å°ä¹Ÿä¼šå¯¼è‡´ä¿¡å·é€æ­¥ç¼©å°ã€‚

#### **2. æ¢¯åº¦çˆ†ç‚¸çš„åŽŸå› **
+ **é“¾å¼æ³•åˆ™ç´¯ä¹˜å¯¼è‡´æ¢¯åº¦å‘æ•£**  
å¦‚æžœæ¿€æ´»å‡½æ•°çš„å¯¼æ•°æˆ–æƒé‡å¤§äºŽ1ï¼Œè¿žä¹˜åŽæ¢¯åº¦æŒ‡æ•°çº§å¢žå¤§ï¼Œå¯¼è‡´æ¨¡åž‹æƒé‡æ›´æ–°å‰§çƒˆï¼Œç”šè‡³æ•°å€¼æº¢å‡ºã€‚
+ **æƒé‡åˆå§‹åŒ–è¿‡å¤§**  
åˆå§‹æƒé‡åˆ†å¸ƒè¿‡å¤§æ”¾å¤§äº†ä¿¡å·ã€‚

### **é¢è¯•å›žç­”**
> æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸éƒ½æ˜¯å› ä¸ºåå‘ä¼ æ’­è¿‡ç¨‹ä¸­æ¢¯åº¦åœ¨å¤šå±‚ä¼ æ’­æ—¶ä¸æ–­è¿žä¹˜ï¼Œå¦‚æžœè¿žä¹˜çš„å¯¼æ•°å°äºŽ1å°±å¯¼è‡´æ¢¯åº¦æ¶ˆå¤±ï¼Œå¤§äºŽ1åˆ™å¯¼è‡´æ¢¯åº¦çˆ†ç‚¸ã€‚å…¸åž‹åŽŸå› åŒ…æ‹¬æ¿€æ´»å‡½æ•°é¥±å’Œï¼ˆæ¯”å¦‚sigmoidï¼‰ã€æƒé‡åˆå§‹åŒ–ä¸åˆç†å’Œç½‘ç»œè¿‡æ·±ã€‚
>

## è§£å†³æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸çš„æ–¹æ³•
### é—®é¢˜åˆ†æž
**â€œæ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸æ˜¯ç¥žç»ç½‘ç»œè®­ç»ƒä¸­å¸¸è§çš„é—®é¢˜ï¼Œä¸»è¦å‡ºçŽ°åœ¨æ·±å±‚ç½‘ç»œæˆ–RNNä¸­ã€‚é’ˆå¯¹è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œé€šå¸¸ä»Žä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹è¿›è¡Œå¤„ç†ï¼šâ€**

#### 1. **æƒé‡åˆå§‹åŒ–**
+ ä½¿ç”¨åˆé€‚çš„åˆå§‹åŒ–æ–¹å¼å¯ä»¥ç¼“è§£æ¢¯åº¦é—®é¢˜ï¼š
    - å¯¹äºŽReLUï¼šä½¿ç”¨ **Heåˆå§‹åŒ–**ï¼›
    - å¯¹äºŽsigmoidæˆ–tanhï¼šä½¿ç”¨ **Xavieråˆå§‹åŒ–**ã€‚

#### 2. **ä½¿ç”¨åˆé€‚çš„æ¿€æ´»å‡½æ•°**
+ é¿å…ä½¿ç”¨å®¹æ˜“é¥±å’Œçš„æ¿€æ´»å‡½æ•°ï¼ˆå¦‚ sigmoidï¼‰ï¼›
+ ä¼˜å…ˆä½¿ç”¨ **ReLU** åŠå…¶å˜ç§ï¼ˆå¦‚ LeakyReLU, ELUï¼‰ï¼Œèƒ½æœ‰æ•ˆç¼“è§£æ¢¯åº¦æ¶ˆå¤±ã€‚

#### 3. **ä½¿ç”¨å½’ä¸€åŒ–æŠ€æœ¯**
+ **Batch Normalization**ï¼šèƒ½ä½¿æ¯ä¸€å±‚çš„è¾“å…¥ä¿æŒç¨³å®šï¼Œå‡ç¼“æ¢¯åº¦çˆ†ç‚¸æˆ–æ¶ˆå¤±ï¼›
+ **LayerNorm**ï¼ˆå°¤å…¶é€‚ç”¨äºŽRNNã€Transformerç»“æž„ï¼‰ã€‚

#### 4. **æ¢¯åº¦è£å‰ªï¼ˆGradient Clippingï¼‰**
+ **ä¸»è¦ç”¨äºŽRNNã€LSTM**ï¼Œåœ¨æ¢¯åº¦è¿‡å¤§æ—¶å°†å…¶é™åˆ¶åœ¨æŸä¸€èŒƒå›´å†…ï¼ˆå¦‚[-5, 5]ï¼‰ï¼›

#### 5. **åˆç†è®¾ç½®ç½‘ç»œç»“æž„**
+ å‡å°‘ä¸å¿…è¦çš„å±‚æ•°ï¼›
+ ä½¿ç”¨æ®‹å·®è¿žæŽ¥ï¼ˆResidual Connectionï¼‰ï¼Œå¦‚ ResNetï¼Œæœ‰æ•ˆç¼“è§£æ¢¯åº¦æ¶ˆå¤±ã€‚

#### 6. **ä¼˜åŒ–å™¨çš„é€‰æ‹©**
+ åƒ **Adamã€RMSProp** ç­‰è‡ªé€‚åº”ä¼˜åŒ–å™¨ï¼Œå¯¹æ¢¯åº¦é—®é¢˜æœ‰ä¸€å®šç¼“è§£ä½œç”¨ï¼›

### é¢è¯•å›žç­”
> é¢å¯¹æ¢¯åº¦é—®é¢˜ï¼Œå¯ä»¥ä»Žåˆå§‹åŒ–ã€æ¿€æ´»å‡½æ•°ã€å½’ä¸€åŒ–ã€ç»“æž„è®¾è®¡ç­‰å¤šæ–¹é¢ç»¼åˆè€ƒè™‘ï¼Œç¡®ä¿ç½‘ç»œè®­ç»ƒç¨³å®šé«˜æ•ˆã€‚
>

## æ®‹å·®è¿žæŽ¥å¦‚ä½•è§£å†³æ¢¯åº¦çˆ†ç‚¸å’Œæ¢¯åº¦æ¶ˆå¤±
### **é—®é¢˜åˆ†æž**
1. **æ®‹å·®è¿žæŽ¥æ˜¯ä»€ä¹ˆï¼Ÿ**  
æ®‹å·®è¿žæŽ¥æ˜¯åœ¨ç¥žç»ç½‘ç»œä¸­å¼•å…¥çš„ä¸€ç§è·³è·ƒå¼è¿žæŽ¥æ–¹å¼ï¼Œå…¶å…¬å¼ä¸ºï¼š

![image](https://cdn.nlark.com/yuque/__latex/ad468cbdf005efb70b3060f37bc505c9.svg)

å…¶ä¸­ï¼Œ![image](https://cdn.nlark.com/yuque/__latex/a3803c9b72a55f8139079eb36aa883da.svg) æ˜¯è¦å­¦ä¹ çš„æ®‹å·®å‡½æ•°ï¼ˆé€šå¸¸æ˜¯è‹¥å¹²ä¸ªå·ç§¯å±‚ã€ReLUç­‰æ“ä½œï¼‰ï¼Œ![image](https://cdn.nlark.com/yuque/__latex/2adf48e1cf80858f0604d2b51eeed4b8.svg) æ˜¯è¾“å…¥ï¼Œç›´æŽ¥åŠ åˆ°è¾“å‡ºä¸Šã€‚

2. **æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸çš„æœ¬è´¨åŽŸå› **  
åœ¨ä¼ ç»Ÿæ·±å±‚ç¥žç»ç½‘ç»œä¸­ï¼Œæ¢¯åº¦åå‘ä¼ æ’­æ—¶éœ€è¦è¿žç»­ä¹˜å¤šä¸ªæ¢¯åº¦é¡¹ï¼ˆé“¾å¼æ³•åˆ™ï¼‰ï¼Œå¦‚æžœæ¯å±‚çš„æ¢¯åº¦å€¼éƒ½å°äºŽ 1ï¼ˆæˆ–å¤§äºŽ 1ï¼‰ï¼Œå¤šæ¬¡ä¹˜ç§¯ä¼šå¯¼è‡´ï¼š
+ æ¢¯åº¦è¶Šæ¥è¶Šå° â†’ **æ¢¯åº¦æ¶ˆå¤±**
+ æ¢¯åº¦è¶Šæ¥è¶Šå¤§ â†’ **æ¢¯åº¦çˆ†ç‚¸**
3. **æ®‹å·®è¿žæŽ¥å¦‚ä½•ç¼“è§£ï¼Ÿ**
+ åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæ®‹å·®è¿žæŽ¥å¼•å…¥çš„æ’ç­‰æ˜ å°„æä¾›äº†**ç›´æŽ¥è·¯å¾„**ï¼Œä½¿å¾—æ¢¯åº¦å¯ä»¥â€œç»•è¿‡â€å¤æ‚çš„éžçº¿æ€§å˜æ¢ï¼Œç›´æŽ¥ä¼ æ’­åˆ°æ›´æµ…å±‚ï¼Œé¿å…äº†é•¿è·¯å¾„ä¸Šçš„æ¢¯åº¦è¿žä¹˜æ•ˆåº”ã€‚

æ•°å­¦ä¸Šï¼Œåå‘ä¼ æ’­æ¢¯åº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š

![image](https://cdn.nlark.com/yuque/__latex/3b30ed078fa983a19c63198030ca8ba1.svg)

å…¶ä¸­ï¼Œ![image](https://cdn.nlark.com/yuque/__latex/df53f70d20a6a901dfd6da9f6986b470.svg) æ˜¯å•ä½çŸ©é˜µï¼Œè¡¨ç¤ºæ’ç­‰æ˜ å°„ã€‚  
å³ä½¿ ![image](https://cdn.nlark.com/yuque/__latex/fb2e520265a45dd53d8aa560e0b96813.svg) å¾ˆå°æˆ–å¾ˆå¤§ï¼Œ**â€œ+Iâ€** ä¿è¯äº†æ¢¯åº¦è‡³å°‘å¯ä»¥ç¨³å®šåœ°ä¼ é€’ä¸‹åŽ»ã€‚

4. **å®žé™…æ•ˆæžœ**
+ ä½¿å¾—ç½‘ç»œæ›´å®¹æ˜“è®­ç»ƒæ›´æ·±ï¼ˆæ¯”å¦‚ ResNet å¯ä»¥è®­ç»ƒ 152 å±‚ä»¥ä¸Šçš„ç½‘ç»œï¼‰
+ ç¼“è§£æ¢¯åº¦æ¶ˆå¤±ï¼Œç½‘ç»œä¸ä¼šå› ä¸ºæ·±åº¦å¢žåŠ è€Œæ€§èƒ½ä¸‹é™ï¼ˆ**é€€åŒ–é—®é¢˜ degradation problem**ï¼‰

### **é¢è¯•å›žç­”**
> æ®‹å·®è¿žæŽ¥ï¼ˆResidual Connectionï¼‰é€šè¿‡å¼•å…¥**æ’ç­‰æ˜ å°„ï¼ˆidentity mappingï¼‰**ï¼Œä½¿æ¢¯åº¦åœ¨åå‘ä¼ æ’­æ—¶å¯ä»¥ç›´æŽ¥æ²¿è·³è·ƒè·¯å¾„ï¼ˆshortcutï¼‰ä¼ æ’­ï¼Œä»Žè€Œç¼“è§£äº†æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨æ·±å±‚ç½‘ç»œä¸­ï¼Œæ®‹å·®ç»“æž„å¯ä»¥ç¡®ä¿æ¢¯åº¦ä¸ä¼šå› ä¸ºè¿žç»­éžçº¿æ€§å˜æ¢è€Œè¿‡åº¦ç¼©å°æˆ–æ”¾å¤§ï¼Œä»Žè€Œä½¿æ·±å±‚ç½‘ç»œæ›´å®¹æ˜“ä¼˜åŒ–å’Œè®­ç»ƒã€‚
>

## å½’ä¸€åŒ–çš„ä½œç”¨
### **é—®é¢˜åˆ†æž**
1. **æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸äº§ç”Ÿçš„æœ¬è´¨åŽŸå› **
+ ç¥žç»ç½‘ç»œæ¯ä¸€å±‚çš„è¾“å‡ºç»è¿‡éžçº¿æ€§å‡½æ•°å’Œæƒé‡å˜æ¢ï¼Œå¦‚æžœè¾“å…¥åˆ†å¸ƒä¸ç¨³å®šï¼ˆæ–¹å·®è¿‡å¤§æˆ–è¿‡å°ï¼‰ï¼Œç»è¿‡å¤šå±‚ä¹‹åŽï¼Œæ¿€æ´»å€¼å’Œæ¢¯åº¦å¯èƒ½è¿…é€Ÿç¼©å°æˆ–æ‰©å¤§ â†’ é€ æˆæ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸ã€‚
+ ç‰¹åˆ«åœ¨æ·±å±‚ç½‘ç»œä¸­ï¼Œè¿™ç§é—®é¢˜æ›´ä¸¥é‡ã€‚
2. **å½’ä¸€åŒ–æ€Žä¹ˆåšçš„ï¼Ÿ**  
ä»¥ **Batch Normalization** ä¸ºä¾‹ï¼Œå¯¹æ¯ä¸€å±‚çš„ç‰¹å¾åšï¼š

![image](https://cdn.nlark.com/yuque/__latex/271c3576cd94fee8a3c312f44a650190.svg)

å…¶ä¸­ï¼Œ![image](https://cdn.nlark.com/yuque/__latex/756a643380ff53c0692dbc2e7e930a35.svg) å’Œ ![image](https://cdn.nlark.com/yuque/__latex/217d731c58118430ccbb4f9f6d44ce08.svg) æ˜¯ mini-batch ä¸­ç‰¹å¾çš„å‡å€¼å’Œæ–¹å·®ã€‚

â†’ ç»“æžœï¼šè®©æ¿€æ´»å€¼åˆ†å¸ƒå‡å€¼ä¸º 0ï¼Œæ–¹å·®ä¸º 1ã€‚  
â†’ æ¿€æ´»å€¼ä¸ä¼šå› ä¸ºè¾“å…¥å˜åŒ–å‰§çƒˆè€Œåç¦»åˆç†èŒƒå›´ã€‚

3. **ä¸ºä»€ä¹ˆå½’ä¸€åŒ–å¯ä»¥ç¼“è§£æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸ï¼Ÿ**
+ **æ¿€æ´»å€¼ä¿æŒç¨³å®š**ï¼šå½’ä¸€åŒ–é™åˆ¶äº†æ¯ä¸€å±‚è¾“å‡ºçš„åˆ†å¸ƒèŒƒå›´ï¼Œä¸ä¼šå¿«é€Ÿæ”¾å¤§/ç¼©å°ï¼Œé¿å…äº†æ¿€æ´»å€¼çˆ†ç‚¸æˆ–æŽ¥è¿‘ 0 åŒºåŸŸï¼ˆæ¯”å¦‚ Sigmoid é¥±å’ŒåŒºï¼‰
+ **æ¢¯åº¦ä¿æŒç¨³å®š**ï¼šåå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦ä¸Žæ¿€æ´»å€¼ç›´æŽ¥ç›¸å…³ï¼Œæ¿€æ´»å€¼ç¨³å®š â†’ æ¢¯åº¦ä¸ä¼šå¿«é€Ÿè¡°å‡æˆ–çˆ†ç‚¸
+ **é™ä½Žå†…éƒ¨åå˜é‡åç§»ï¼ˆInternal Covariate Shiftï¼‰**ï¼šæ¯å±‚è¾“å…¥åˆ†å¸ƒç¨³å®šï¼Œè®­ç»ƒæ›´ç¨³å®šï¼Œå­¦ä¹ çŽ‡å¯ä»¥è®¾å¾—æ›´å¤§ï¼ŒåŠ é€Ÿæ”¶æ•›

### **é¢è¯•å›žç­”**
> å½’ä¸€åŒ–ï¼ˆNormalizationï¼‰é€šè¿‡æŠŠæ¯å±‚è¾“å…¥æˆ–ç‰¹å¾ç¼©æ”¾åˆ°å‡å€¼ä¸º 0ã€æ–¹å·®ä¸º 1 çš„åˆ†å¸ƒï¼Œä½¿å¾—ç½‘ç»œä¸­çš„æ¿€æ´»å€¼ä¿æŒåœ¨åˆç†èŒƒå›´ï¼Œä»Žè€Œé˜²æ­¢æ¢¯åº¦åœ¨å‰å‘ä¼ æ’­æˆ–åå‘ä¼ æ’­è¿‡ç¨‹ä¸­å› ä¸ºæ•°å€¼è¿‡å¤§æˆ–è¿‡å°å¯¼è‡´æ¢¯åº¦çˆ†ç‚¸æˆ–æ¢¯åº¦æ¶ˆå¤±ã€‚æ­¤å¤–ï¼Œå½’ä¸€åŒ–è®©æ¯å±‚çš„è¾“å…¥åˆ†å¸ƒæ›´ç¨³å®šï¼Œæœ‰åŠ©äºŽåŠ é€Ÿæ”¶æ•›å¹¶ç¨³å®šè®­ç»ƒã€‚
>

## ä¸ºä»€ä¹ˆsigmoidä¼šé¥±å’Œ  
### é—®é¢˜åˆ†æž
#### æ ‡å‡†å®šä¹‰
**Sigmoid æ¿€æ´»å‡½æ•°å…¬å¼ï¼š**  
Ïƒ(x) = 1 / (1 + e^(-x))  
è¾“å‡ºèŒƒå›´ï¼šï¼ˆ0, 1ï¼‰

#### ä¸ºä»€ä¹ˆ sigmoid ä¼šé¥±å’Œï¼Ÿ
1. **è¾“å…¥ç»å¯¹å€¼è¿‡å¤§æ—¶æ¢¯åº¦è¶‹è¿‘äºŽ0**  
å½“è¾“å…¥ x å¾ˆå¤§ï¼ˆè¿œå¤§äºŽ0ï¼‰æˆ–å¾ˆå°ï¼ˆè¿œå°äºŽ0ï¼‰æ—¶ï¼š
    - x â†’ +âˆžï¼ŒÏƒ(x) â†’ 1
    - x â†’ -âˆžï¼ŒÏƒ(x) â†’ 0
2. **å¯¼æ•°å‡ ä¹Žä¸º0**  
Sigmoid çš„å¯¼æ•°å…¬å¼ä¸ºï¼š  
Ïƒ'(x) = Ïƒ(x) * (1 - Ïƒ(x))  
å½“ Ïƒ(x) æŽ¥è¿‘ 0 æˆ– 1 æ—¶ï¼ŒÏƒ'(x) â‰ˆ 0
3. **æ¢¯åº¦æ¶ˆå¤±çš„ç›´æŽ¥æ¥æº**  
åå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦ä¹˜ä¸Šè¿™ä¹ˆå°çš„å¯¼æ•°ï¼Œä¿¡æ¯å‡ ä¹Žæ— æ³•å‘å‰å±‚ä¼ é€’ï¼Œç§°ä¸ºã€Œé¥±å’ŒåŒºã€ã€‚

### é¢è¯•ç®€æ´ç‰ˆå›žç­”æ¨¡æ¿
> Sigmoid åœ¨è¾“å…¥ç»å¯¹å€¼å¾ˆå¤§æ—¶è¾“å‡ºæŽ¥è¿‘0æˆ–1ï¼Œå¯¼æ•°æŽ¥è¿‘0ã€‚å¯¼æ•°æ¢¯åº¦å‡ ä¹Žä¸ä¼ é€’ï¼Œè¿™å«åšé¥±å’Œï¼Œæœ€ç»ˆå¼•å‘æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚
>

## BatchNormå’ŒLayerNormæœ‰ä»€ä¹ˆåŒºåˆ«  
### é—®é¢˜åˆ†æž
| **ç»´åº¦** | **BatchNorm (BN)** | **LayerNorm (LN)** |
| --- | --- | --- |
| **å½’ä¸€åŒ–ç»´åº¦** | **æ ·æœ¬é—´å½’ä¸€åŒ–**ï¼ˆbatchç»´åº¦ï¼‰ | **æ ·æœ¬å†…å½’ä¸€åŒ–**ï¼ˆfeatureç»´åº¦ï¼‰ |
| **è®¡ç®—å…¬å¼** | å¯¹æ¯ä¸ªç‰¹å¾ç»´åº¦ kkk è®¡ç®—   Î¼å’ŒÏƒæ¥è‡ª**batchä¸­æ‰€æœ‰æ ·æœ¬** | å¯¹æ¯ä¸ªæ ·æœ¬ç‹¬ç«‹è®¡ç®—   Î¼å’ŒÏƒæ¥è‡ª**ç‰¹å¾ç»´åº¦** |
| **ä¾èµ– Batch Size** | **ä¾èµ– batch size**ï¼ˆå° batch æ—¶æ•ˆæžœå·®ï¼‰ | **ä¸ä¾èµ– batch size** |
| **åº”ç”¨åœºæ™¯** | CNNã€MLP ä¸­å¸¸ç”¨ | Transformerã€RNN ä¸­å¸¸ç”¨ |
| **å…¬å¼ç¤ºä¾‹** | ![](https://cdn.nlark.com/yuque/0/2025/png/28454971/1747120558875-3c870317-8fda-475f-8ece-dd7c4937bf80.png) | ![](https://cdn.nlark.com/yuque/0/2025/png/28454971/1747120568287-867c030b-3b85-4d68-89b0-8d2233db2ffd.png) |
| **è¿è¡Œæ—¶ç»Ÿè®¡ï¼ˆæŽ¨ç†é˜¶æ®µï¼‰** | éœ€è¦ä¿å­˜ moving mean/var | ä¸éœ€è¦é¢å¤–ç»Ÿè®¡ |


### **é¢è¯•å›žç­”**
> BatchNorm å¯¹ batch ç»´åº¦å½’ä¸€åŒ–ï¼Œä¾èµ–å¤šä¸ªæ ·æœ¬ï¼Œé€‚åˆ CNNï¼Œä½†å¯¹å° batch æ•æ„Ÿï¼›LayerNorm å¯¹å•ä¸ªæ ·æœ¬ç‰¹å¾å½’ä¸€åŒ–ï¼Œä¸ä¾èµ– batch sizeï¼Œæ›´é€‚åˆ RNN å’Œ Transformer ç­‰åºåˆ—æ¨¡åž‹ã€‚
>

## dropoutçš„ä½œç”¨æ˜¯ä»€ä¹ˆ  
### **é—®é¢˜åˆ†æž**
**Dropout æ˜¯ä¸€ç§æ­£åˆ™åŒ–æ–¹æ³•ï¼Œä¸»è¦ä½œç”¨æ˜¯é˜²æ­¢è¿‡æ‹Ÿåˆ (overfitting)ã€‚**

#### **æ ¸å¿ƒåŽŸç†**
+ è®­ç»ƒæ—¶ï¼Œ**ä»¥ä¸€å®šæ¦‚çŽ‡éšæœºä¸¢å¼ƒç¥žç»å…ƒ**ï¼ˆå³è®¾ä¸º0ï¼‰ï¼Œè®©æ¨¡åž‹ä¸èƒ½è¿‡åº¦ä¾èµ–æŸäº›ç‰¹å¾
+ è¿™æ ·æ¯æ¬¡è®­ç»ƒéƒ½ç›¸å½“äºŽåœ¨ä¸åŒçš„ã€Œå­ç½‘ç»œã€ä¸Šæ›´æ–°å‚æ•°  
â†’ **ç›¸å½“äºŽé›†æˆå¤šä¸ªæ¨¡åž‹ (model ensemble)**  
â†’ æå‡æ¨¡åž‹çš„æ³›åŒ–èƒ½åŠ›

#### **æ•°å­¦è¡¨è¾¾**
è®­ç»ƒæ—¶ï¼š

x~=xâ‹…m,mâˆ¼Bernoulli(p)

pä¸ºä¿ç•™æ¦‚çŽ‡ (keep probability)

æŽ¨ç†æ—¶ï¼š

+ ä¸ä¸¢èŠ‚ç‚¹ï¼Œè¾“å‡ºä¹˜ä»¥ ppp çš„ç¼©æ”¾è¡¥å¿ï¼ˆä¿æŒæœŸæœ›ä¸€è‡´ï¼‰

### **é¢è¯•å›žç­”**
> Dropout é€šè¿‡è®­ç»ƒæ—¶éšæœºä¸¢å¼ƒç¥žç»å…ƒï¼Œé˜²æ­¢æ¨¡åž‹è¿‡åº¦ä¾èµ–å±€éƒ¨ç‰¹å¾ï¼Œç›¸å½“äºŽé›†æˆå¤šä¸ªå­ç½‘ç»œï¼Œä¸»è¦ä½œç”¨æ˜¯é™ä½Žè¿‡æ‹Ÿåˆã€æå‡æ³›åŒ–èƒ½åŠ›ã€‚
>

### **å¦‚æžœé¢è¯•å®˜è¿½é—®ã€Œä¸ºä»€ä¹ˆ Dropout èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆï¼Ÿã€**
> å› ä¸º Dropout è¿«ä½¿ç½‘ç»œå­¦åˆ°å†—ä½™ä¸”æ›´é²æ£’çš„ç‰¹å¾è¡¨è¾¾ï¼Œä¸ä¾èµ–å•ä¸€ç¥žç»å…ƒï¼ŒåŒæ—¶ç›¸å½“äºŽé›†æˆå¤šä¸ªå­æ¨¡åž‹ï¼Œå¢žå¼ºæ¨¡åž‹ç¨³å®šæ€§ã€‚
>

## ä»€ä¹ˆæ˜¯ç¥žç»å…ƒå’Œæ¿€æ´»å‡½æ•°ï¼ˆ**ä¸ºä»€ä¹ˆè¦å¼•å…¥æ¿€æ´»å‡½æ•°**ï¼‰
### **é¢è¯•å›žç­”**
> ç¥žç»å…ƒæ˜¯ç¥žç»ç½‘ç»œçš„åŸºæœ¬è®¡ç®—å•å…ƒï¼Œä¸»è¦ä½œç”¨æ˜¯å¯¹è¾“å…¥ç‰¹å¾åŠ æƒæ•´åˆå¹¶å¼•å…¥éžçº¿æ€§ï¼Œä»Žè€Œå¸®åŠ©æ¨¡åž‹æå–å’Œç»„åˆå¤æ‚ç‰¹å¾ã€‚åœ¨ä¸åŒç½‘ç»œä¸­ï¼Œç¥žç»å…ƒå½¢å¼ä¸åŒï¼šMLP ä¸­æ˜¯å…¨è¿žæŽ¥ï¼ŒCNN ä¸­æ˜¯å±€éƒ¨æ„Ÿå—é‡Žï¼ŒRNN ä¸­æœ‰æ—¶é—´ä¾èµ–ï¼ŒTransformer ç»“åˆè‡ªæ³¨æ„åŠ›å»ºæ¨¡å…¨å±€å…³ç³»ã€‚
>
> æ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼Œç¥žç»ç½‘ç»œåªæ˜¯çº¿æ€§æ¨¡åž‹ï¼Œæ— æ³•æ‹Ÿåˆå¤æ‚éžçº¿æ€§é—®é¢˜ï¼›æ¿€æ´»å‡½æ•°ä½¿æ¨¡åž‹å…·æœ‰éžçº¿æ€§è¡¨è¾¾èƒ½åŠ›ï¼Œä»Žè€Œå¢žå¼ºæ¨¡åž‹æ‹Ÿåˆèƒ½åŠ›ã€‚
>

## æ± åŒ–çš„ä½œç”¨æ˜¯ä»€ä¹ˆ  
### é—®é¢˜åˆ†æž
æ± åŒ–ï¼ˆ**Pooling**ï¼‰æ˜¯å·ç§¯ç¥žç»ç½‘ç»œï¼ˆCNNï¼‰ä¸­çš„ä¸€ç§é‡è¦æ“ä½œï¼Œä¸»è¦ç”¨äºŽå‡å°‘ç©ºé—´å°ºå¯¸ã€æŽ§åˆ¶è®¡ç®—é‡ã€æé«˜æ¨¡åž‹çš„é²æ£’æ€§ï¼Œä¸”å¸¸ç”¨äºŽ **å·ç§¯å±‚** å’Œ **å…¨è¿žæŽ¥å±‚** ä¹‹é—´ã€‚å…¶æ ¸å¿ƒä½œç”¨æ˜¯é€šè¿‡æ±‡èšç‰¹å¾å›¾ä¸­çš„ä¿¡æ¯ï¼Œå‡å°‘å‚æ•°æ•°é‡å’Œè®¡ç®—å¤æ‚åº¦ï¼Œå¹¶å¢žå¼ºæ¨¡åž‹çš„æ³›åŒ–èƒ½åŠ›ã€‚

#### æ± åŒ–çš„ä¸»è¦ä½œç”¨
1. **é™ä½Žè®¡ç®—å¤æ‚åº¦**
    - æ± åŒ–æ“ä½œé€šè¿‡å‡å°ç‰¹å¾å›¾çš„ç©ºé—´ç»´åº¦ï¼ˆä¾‹å¦‚ï¼Œä»Ž ![image](https://cdn.nlark.com/yuque/__latex/a11ea46280669ac0bf8afdac4019d77f.svg) é™åˆ° ![image](https://cdn.nlark.com/yuque/__latex/5c8213948b3250fd57bd3a27a4232c6a.svg)ï¼‰ï¼Œ**å‡å°‘äº†åŽç»­å±‚çš„è®¡ç®—é‡**ã€‚
    - è¿™æ ·å¯ä»¥å‡å°‘å†…å­˜æ¶ˆè€—å¹¶åŠ é€Ÿè®­ç»ƒè¿‡ç¨‹ã€‚
2. **æŽ§åˆ¶è¿‡æ‹Ÿåˆ**
    - æ± åŒ–å±‚é€šè¿‡é™ä½Žç‰¹å¾å›¾çš„åˆ†è¾¨çŽ‡ï¼Œ**ä½¿å¾—æ¨¡åž‹æ›´å…·é²æ£’æ€§**ï¼Œé™ä½Žäº†å¯¹å±€éƒ¨ç‰¹å¾çš„ä¾èµ–ï¼Œé—´æŽ¥åœ°å¯¹æ¨¡åž‹èµ·åˆ°äº†æ­£åˆ™åŒ–ä½œç”¨ï¼Œä»Žè€Œå‡å°‘äº†è¿‡æ‹Ÿåˆçš„é£Žé™©ã€‚
3. **ä¿ç•™é‡è¦ç‰¹å¾**
    - æ± åŒ–æ“ä½œèƒ½å¤Ÿèšç„¦å›¾åƒä¸­çš„é‡è¦ä¿¡æ¯ï¼Œå¹¶ä¸¢å¼ƒè¾ƒä¸é‡è¦çš„éƒ¨åˆ†ï¼Œä½¿å¾—å·ç§¯ç½‘ç»œæ›´åŠ ä¸“æ³¨äºŽå›¾åƒçš„å…³é”®ä¿¡æ¯ã€‚
    - å¸¸è§çš„æ± åŒ–æ“ä½œï¼ˆå¦‚æœ€å¤§æ± åŒ–ï¼‰é€šè¿‡é€‰å–å±€éƒ¨åŒºåŸŸå†…çš„æœ€å¤§å€¼æ¥ä¿ç•™é‡è¦ç‰¹å¾ã€‚
4. **å¢žå¼ºæ¨¡åž‹çš„å¹³ç§»ä¸å˜æ€§**
    - æ± åŒ–å¯ä»¥è®©ç½‘ç»œå¯¹è¾“å…¥å›¾åƒçš„å¹³ç§»äº§ç”Ÿè¾ƒå°çš„æ•æ„Ÿåº¦ï¼Œæå‡äº†**å¹³ç§»ä¸å˜æ€§**ã€‚è¿™æ„å‘³ç€ç½‘ç»œå¯¹å›¾åƒä¸­çš„å°çš„å¹³ç§»å˜æ¢ä¸å†è¿‡äºŽæ•æ„Ÿï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å›¾åƒä¸­ä½ç½®çš„å˜åŒ–ã€‚

#### å¸¸è§æ± åŒ–ç±»åž‹
1. **æœ€å¤§æ± åŒ–ï¼ˆMax Poolingï¼‰**
    - å¯¹å±€éƒ¨åŒºåŸŸï¼ˆé€šå¸¸ä¸º ![image](https://cdn.nlark.com/yuque/__latex/829db47d500df094775efa8c62bdd9ea.svg) æˆ– ![image](https://cdn.nlark.com/yuque/__latex/b08d861763b277c3ff6c7f92bc62b06c.svg)ï¼‰ä¸­çš„æœ€å¤§å€¼è¿›è¡Œæ± åŒ–ã€‚
    - **ä½œç”¨**ï¼šä¿ç•™è¯¥åŒºåŸŸçš„æœ€æ˜¾è‘—ç‰¹å¾ï¼Œå¢žå¼ºç½‘ç»œå¯¹å…³é”®ç‰¹å¾çš„è¯†åˆ«èƒ½åŠ›ã€‚

![image](https://cdn.nlark.com/yuque/__latex/6455d3f5235d607e9cd9c7ca4c558aa5.svg)

   ä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ª ![image](https://cdn.nlark.com/yuque/__latex/829db47d500df094775efa8c62bdd9ea.svg) åŒºåŸŸè¿›è¡Œæœ€å¤§æ± åŒ–ï¼š

![image](https://cdn.nlark.com/yuque/__latex/63368eaaccf1d974e01d74a9d5016138.svg)

2. **å¹³å‡æ± åŒ–ï¼ˆAverage Poolingï¼‰**
    - å¯¹å±€éƒ¨åŒºåŸŸä¸­çš„æ‰€æœ‰å€¼å–å¹³å‡å€¼è¿›è¡Œæ± åŒ–ã€‚
    - **ä½œç”¨**ï¼šå¹³æ»‘ç‰¹å¾å›¾ï¼Œå‡å°æžç«¯å€¼çš„å½±å“ï¼Œå¸¸ç”¨äºŽå¯¹ç‰¹å¾å›¾çš„å¹³æ»‘å¤„ç†ã€‚

![image](https://cdn.nlark.com/yuque/__latex/0c4a9a856138df063c36273c5ab365e5.svg)

   ä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ª ![image](https://cdn.nlark.com/yuque/__latex/829db47d500df094775efa8c62bdd9ea.svg) åŒºåŸŸè¿›è¡Œå¹³å‡æ± åŒ–ï¼š

![image](https://cdn.nlark.com/yuque/__latex/cd8dc4611575742ffbbdeac5d33b6d23.svg)

3. **å…¨å±€æ± åŒ–ï¼ˆGlobal Poolingï¼‰**
    - å¯¹æ•´ä¸ªç‰¹å¾å›¾è¿›è¡Œæ± åŒ–ï¼Œé€šå¸¸ç”¨äºŽç½‘ç»œçš„æœ€åŽå‡ å±‚ã€‚
    - å¦‚ **å…¨å±€æœ€å¤§æ± åŒ–** å’Œ **å…¨å±€å¹³å‡æ± åŒ–**ï¼Œå¯ä»¥å°†æ•´ä¸ªç‰¹å¾å›¾åŽ‹ç¼©æˆä¸€ä¸ªå•ä¸€çš„å€¼ã€‚

![image](https://cdn.nlark.com/yuque/__latex/dea742c543cbeabf91bd46e4645b3ba4.svg)

![image](https://cdn.nlark.com/yuque/__latex/06c9e472213684f7afff2e45e207b3ec.svg)

### **é¢è¯•å›žç­”**
> **æ± åŒ–**ä¸»è¦é€šè¿‡å‡å°‘ç‰¹å¾å›¾çš„ç©ºé—´ç»´åº¦ï¼Œ**é™ä½Žè®¡ç®—é‡**ï¼Œ**å¢žå¼ºé²æ£’æ€§**ï¼Œ**é˜²æ­¢è¿‡æ‹Ÿåˆ**ï¼Œå¹¶ä¸”å¸®åŠ©æé«˜**å¹³ç§»ä¸å˜æ€§**ã€‚å¸¸è§çš„æ± åŒ–æ–¹å¼æœ‰æœ€å¤§æ± åŒ–å’Œå¹³å‡æ± åŒ–ï¼Œæœ€å¤§æ± åŒ–ä¿ç•™åŒºåŸŸå†…çš„æœ€å¤§ç‰¹å¾ï¼Œè€Œå¹³å‡æ± åŒ–åˆ™è®¡ç®—åŒºåŸŸå†…çš„å¹³å‡å€¼ã€‚
>

### **å¦‚æžœé¢è¯•å®˜è¿½é—®ã€Œæ± åŒ–å’Œå·ç§¯çš„åŒºåˆ«ã€**
> **å·ç§¯**æ˜¯ç‰¹å¾æå–çš„æ“ä½œï¼Œèƒ½å¤Ÿä¿ç•™å±€éƒ¨ä¿¡æ¯å¹¶é€šè¿‡å­¦ä¹ å·ç§¯æ ¸æ¥æå–ä¸åŒå±‚æ¬¡çš„ç‰¹å¾ï¼›è€Œ**æ± åŒ–**æ˜¯é™ç»´æ“ä½œï¼Œä¸»è¦ç”¨äºŽå‡å°‘è®¡ç®—é‡ã€é™ä½Žç‰¹å¾å›¾ç»´åº¦ï¼Œå¹¶ä¸”å¸®åŠ©å¢žå¼ºç‰¹å¾çš„é²æ£’æ€§ã€‚æ± åŒ–é€šå¸¸è·Ÿåœ¨å·ç§¯å±‚ä¹‹åŽã€‚
>



## ä»€ä¹ˆæ˜¯å¹³ç§»ä¸å˜æ€§
### é—®é¢˜åˆ†æž
**å¹³ç§»ä¸å˜æ€§ï¼ˆTranslation Invarianceï¼‰** æ˜¯æŒ‡ä¸€ä¸ªæ¨¡åž‹æˆ–ç®—æ³•å¯¹è¾“å…¥çš„å¹³ç§»ï¼ˆä½ç½®åç§»ï¼‰ä¸æ•æ„Ÿï¼Œå³æ¨¡åž‹èƒ½å¤Ÿè¯†åˆ«å‡ºç‰©ä½“çš„ç‰¹å¾æˆ–æ¨¡å¼ï¼Œè€Œä¸å—ç‰©ä½“åœ¨å›¾åƒä¸­çš„ä½ç½®å˜åŒ–çš„å½±å“ã€‚

åœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼Œ**å¹³ç§»ä¸å˜æ€§**æ„å‘³ç€å¦‚æžœå›¾åƒä¸­çš„å¯¹è±¡å‘ç”Ÿäº†å¹³ç§»ï¼ˆä¾‹å¦‚ï¼Œç‰©ä½“ä»Žå·¦è¾¹ç§»åŠ¨åˆ°å³è¾¹ï¼‰ï¼Œç¥žç»ç½‘ç»œä»ç„¶èƒ½å¤Ÿæ­£ç¡®åœ°è¯†åˆ«å‡ºè¯¥å¯¹è±¡ï¼Œè€Œä¸éœ€è¦é‡æ–°å­¦ä¹ ä½ç½®ç›¸å…³çš„ç‰¹å¾ã€‚

#### ä¸ºä»€ä¹ˆå¹³ç§»ä¸å˜æ€§é‡è¦ï¼Ÿ
+ **è‡ªç„¶ç•Œçš„ç‰©ä½“å¹¶ä¸ä¼šæ€»æ˜¯å‡ºçŽ°åœ¨åŒä¸€ä¸ªä½ç½®**ã€‚ä¾‹å¦‚ï¼Œå›¾åƒä¸­çš„çŒ«å¯èƒ½å‡ºçŽ°åœ¨å·¦ä¾§ã€ä¸­é—´æˆ–å³ä¾§ï¼Œä½†æˆ‘ä»¬å¸Œæœ›æ¨¡åž‹èƒ½å¤Ÿå§‹ç»ˆè¯†åˆ«å‡ºçŒ«ï¼Œè€Œä¸å—å…¶ä½ç½®å˜åŒ–çš„å½±å“ã€‚
+ **æé«˜æ¨¡åž‹çš„æ³›åŒ–èƒ½åŠ›**ï¼Œè®©å®ƒèƒ½å¤„ç†ä¸åŒä½ç½®çš„ç‰©ä½“ï¼Œå¹¶ä¸”ä½¿å¾—æ¨¡åž‹å¯¹ä½ç½®ä¿¡æ¯çš„ä¾èµ–è¾ƒå°ã€‚

#### å¹³ç§»ä¸å˜æ€§å¦‚ä½•é€šè¿‡æ± åŒ–å’Œå·ç§¯å®žçŽ°ï¼Ÿ
1. **å·ç§¯æ“ä½œ**ï¼š
    - å·ç§¯ç¥žç»ç½‘ç»œï¼ˆCNNï¼‰é€šè¿‡ä½¿ç”¨å…±äº«çš„å·ç§¯æ ¸ï¼ˆæ»¤æ³¢å™¨ï¼‰æ¥æå–å›¾åƒç‰¹å¾ã€‚å·ç§¯æ ¸åœ¨æ•´ä¸ªå›¾åƒä¸Šæ»‘åŠ¨ï¼Œå¹¶å¯¹æ¯ä¸ªåŒºåŸŸè¿›è¡Œç›¸åŒçš„æ“ä½œï¼Œä»Žè€Œä½¿ç½‘ç»œèƒ½å¤Ÿåœ¨å›¾åƒä¸­è¯†åˆ«ç‰¹å®šçš„ç‰¹å¾ï¼ˆä¾‹å¦‚è¾¹ç¼˜ã€çº¹ç†ç­‰ï¼‰ï¼Œæ— è®ºè¿™äº›ç‰¹å¾å‡ºçŽ°çš„ä½ç½®å¦‚ä½•ã€‚
    - å·ç§¯æ“ä½œå¤©ç„¶å…·æœ‰**å±€éƒ¨å¹³ç§»ä¸å˜æ€§**ã€‚å³ä½¿å›¾åƒä¸­çš„ç‰©ä½“å‘ç”Ÿäº†å¹³ç§»ï¼Œå·ç§¯å±‚ä»ç„¶èƒ½å¤Ÿæ£€æµ‹åˆ°ç›¸åŒçš„ç‰¹å¾ã€‚
2. **æ± åŒ–æ“ä½œ**ï¼š
    - æ± åŒ–æ“ä½œï¼Œå°¤å…¶æ˜¯ **æœ€å¤§æ± åŒ–ï¼ˆMax Poolingï¼‰**ï¼Œé€šè¿‡åœ¨ç‰¹å®šçš„å±€éƒ¨åŒºåŸŸå†…é€‰å–æœ€å¤§å€¼æˆ–å¹³å‡å€¼æ¥é™ä½Žç‰¹å¾å›¾çš„åˆ†è¾¨çŽ‡ã€‚
    - è¿™ä¸€è¿‡ç¨‹å¸®åŠ©æé«˜å¹³ç§»ä¸å˜æ€§ï¼Œå› ä¸ºå®ƒå‡å°äº†å¾®å°çš„ç©ºé—´åç§»ï¼ˆä¾‹å¦‚ï¼Œç‰©ä½“çš„è½»å¾®å¹³ç§»ï¼‰å¯¹ç‰¹å¾è¡¨ç¤ºçš„å½±å“ã€‚
    - ä¾‹å¦‚ï¼Œåœ¨è¿›è¡Œæœ€å¤§æ± åŒ–æ—¶ï¼Œå¦‚æžœå›¾åƒçš„ä¸€ä¸ªç‰¹å¾åŒºåŸŸå‘ç”Ÿäº†å¹³ç§»ï¼Œä½†è¿™ä¸ªåŒºåŸŸä¸­çš„æœ€å¤§å€¼ä¿æŒä¸å˜ï¼Œé‚£ä¹ˆæ± åŒ–å±‚ä¾ç„¶èƒ½å¤Ÿè¯†åˆ«è¿™ä¸ªç‰¹å¾ã€‚

#### å¹³ç§»ä¸å˜æ€§çš„ç¤ºæ„
å‡è®¾æœ‰ä¸€å¼ çŒ«çš„å›¾ç‰‡ï¼Œæ— è®ºçŒ«å‡ºçŽ°åœ¨å·¦ä¸Šè§’ã€ä¸­é—´ï¼Œè¿˜æ˜¯å³ä¸‹è§’ï¼Œå·ç§¯ç¥žç»ç½‘ç»œï¼ˆCNNï¼‰é€šè¿‡å…¶å·ç§¯å’Œæ± åŒ–å±‚ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°è¯†åˆ«çŒ«çš„ç‰¹å¾ã€‚è¿™æ˜¯å› ä¸ºå·ç§¯æ“ä½œä¼šæå–å±€éƒ¨ç‰¹å¾ï¼ˆä¾‹å¦‚ï¼Œè€³æœµã€çœ¼ç›ã€è½®å»“ç­‰ï¼‰ï¼Œè€Œæ± åŒ–æ“ä½œåˆ™å¸®åŠ©å‡å°‘ä½ç½®ä¿¡æ¯çš„å½±å“ï¼Œç¡®ä¿æ¨¡åž‹å¯¹å¹³ç§»ä¸æ•æ„Ÿã€‚

### **é¢è¯•å›žç­”**
> **å¹³ç§»ä¸å˜æ€§**æ˜¯æŒ‡æ¨¡åž‹èƒ½å¤Ÿè¯†åˆ«å‡ºè¾“å…¥ç‰¹å¾æˆ–ç‰©ä½“ï¼Œè€Œä¸å—ç‰©ä½“åœ¨å›¾åƒä¸­çš„ä½ç½®å˜åŒ–çš„å½±å“ã€‚åœ¨å·ç§¯ç¥žç»ç½‘ç»œï¼ˆCNNï¼‰ä¸­ï¼Œå·ç§¯å±‚å’Œæ± åŒ–å±‚è‡ªç„¶å…·æœ‰å¹³ç§»ä¸å˜æ€§ï¼Œå› ä¸ºå·ç§¯æ“ä½œæå–å±€éƒ¨ç‰¹å¾ï¼Œæ± åŒ–æ“ä½œåˆ™é€šè¿‡é™ç»´æ¥å‡å°‘ä½ç§»å¯¹ç‰¹å¾çš„å½±å“ã€‚
>

## BERT æ¨¡åž‹
### **é—®é¢˜åˆ†æž**
BERTï¼Œå…¨ç§° **Bidirectional Encoder Representations from Transformers**ï¼Œç”± Google 2018 å¹´æå‡ºï¼Œæ˜¯ä¸€ç§åŸºäºŽ Transformer ç¼–ç å™¨çš„**é¢„è®­ç»ƒè¯­è¨€æ¨¡åž‹**ã€‚

**ä¸»è¦ç‰¹ç‚¹æœ‰ 3 ç‚¹ï¼š**

1. **åŒå‘ç¼–ç **ï¼šç›¸æ¯”ä¼ ç»Ÿè¯­è¨€æ¨¡åž‹åªä»Žå·¦åˆ°å³ï¼ŒBERT ä½¿ç”¨**Masked Language Model (MLM)**ï¼Œå¯ä»¥åŒæ—¶åˆ©ç”¨å·¦å³ä¸Šä¸‹æ–‡ç†è§£è¯è¯­å«ä¹‰ã€‚
2. **é¢„è®­ç»ƒ+å¾®è°ƒ**æ¡†æž¶ï¼šBERT åœ¨å¤§è§„æ¨¡è¯­æ–™ï¼ˆå¦‚ Wikipedia + BookCorpusï¼‰ä¸Šé¢„è®­ç»ƒåŽï¼Œå¯ä»¥è¿ç§»åˆ°å…·ä½“ä»»åŠ¡ï¼ˆå¦‚åˆ†ç±»ã€é—®ç­”ï¼‰è¿›è¡Œå¾®è°ƒï¼Œæ•ˆæžœä¼˜å¼‚ã€‚
3. **è¾“å…¥è¡¨ç¤º**ï¼šBERT è¾“å…¥ä¸ä»…æœ‰è¯å‘é‡ï¼Œè¿˜æœ‰**Segment Embedding** å’Œ **Position Embedding**ï¼Œå¯åŒæ—¶å¤„ç†å•å¥æˆ–å¥å­å¯¹ä»»åŠ¡ã€‚

å…¸åž‹åº”ç”¨ï¼šæ–‡æœ¬åˆ†ç±»ã€å‘½åå®žä½“è¯†åˆ«ï¼ˆNERï¼‰ã€é˜…è¯»ç†è§£ã€å¥å­åŒ¹é…ç­‰ã€‚

### **é¢è¯•å›žç­”**
> BERTï¼ˆBidirectional Encoder Representations from Transformersï¼‰æ˜¯ä¸€ç§åŸºäºŽ Transformer ç¼–ç å™¨çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡åž‹ï¼Œç‰¹ç‚¹æ˜¯**åŒå‘ä¸Šä¸‹æ–‡å»ºæ¨¡**ï¼Œå¯ä»¥æ›´å¥½ç†è§£å¥å­è¯­ä¹‰ã€‚BERT å…ˆç”¨**å¤§è§„æ¨¡æ–‡æœ¬é¢„è®­ç»ƒ**ï¼Œå†é€šè¿‡**ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒ**ï¼Œå¹¿æ³›åº”ç”¨äºŽæ–‡æœ¬åˆ†ç±»ã€é—®ç­”ç­‰ä»»åŠ¡ã€‚BERT é€šè¿‡ Masked Language Model å’Œ Next Sentence Prediction ä¸¤ä¸ªé¢„è®­ç»ƒç›®æ ‡ï¼Œæ•æ‰äº†è¯çº§åˆ«å’Œå¥å­çº§åˆ«çš„å…³ç³»ã€‚ç»­å¦‚ RoBERTaã€ALBERTã€DistilBERT éƒ½åœ¨ BERT åŸºç¡€ä¸Šè¿›ä¸€æ­¥ä¼˜åŒ–æ¨¡åž‹è§„æ¨¡ã€æ•ˆçŽ‡å’Œæ€§èƒ½ã€‚BERT é€šè¿‡åŒå‘é¢„è®­ç»ƒå’Œçµæ´»å¾®è°ƒï¼Œæ˜¾è‘—æŽ¨åŠ¨äº† NLP ä»»åŠ¡æ•ˆæžœï¼Œå±žäºŽé¢„è®­ç»ƒè¯­è¨€æ¨¡åž‹çš„é‡Œç¨‹ç¢‘å·¥ä½œã€‚
>

### BERTè®­ç»ƒä»»åŠ¡
ã€ŒBERT æ˜¯é€šè¿‡è‡ªç›‘ç£å­¦ä¹ è¿›è¡Œè®­ç»ƒçš„ï¼Œæ ¸å¿ƒçš„è®­ç»ƒä»»åŠ¡æœ‰ä¸¤ä¸ªï¼š**æŽ©è”½è¯­è¨€æ¨¡åž‹ (MLM)** å’Œ **ä¸‹ä¸€å¥é¢„æµ‹ (NSP)**ã€‚

+ åœ¨ MLM ä¸­ï¼ŒéšæœºæŽ©è”½è¾“å…¥å¥å­ä¸­çš„ä¸€äº›è¯ï¼Œæ¨¡åž‹é€šè¿‡ä¸Šä¸‹æ–‡é¢„æµ‹è¿™äº›è¢«æŽ©è”½çš„è¯ã€‚
+ åœ¨ NSP ä¸­ï¼Œæ¨¡åž‹åˆ¤æ–­ä¸¤ä¸ªå¥å­æ˜¯å¦æ˜¯è¿žç»­çš„ï¼Œä»Žè€Œå­¦ä¹ å¥å­çº§åˆ«çš„å…³ç³»ã€‚  
BERT çš„è®­ç»ƒæ•°æ®é€šè¿‡å¤§è§„æ¨¡è¯­æ–™åº“ç”Ÿæˆï¼Œå¹¶æ ¹æ®è¿™äº›ä»»åŠ¡æž„å»ºæŽ©è”½å’Œå¥å­å¯¹ï¼Œè¿›è¡Œæ— ç›‘ç£çš„é¢„è®­ç»ƒã€‚ã€

## Transformer
### **é—®é¢˜åˆ†æž**
Transformer æ˜¯ Google 2017 å¹´æå‡ºçš„æ¨¡åž‹æž¶æž„ï¼Œç‰¹ç‚¹æ˜¯ä¸ä¾èµ–å¾ªçŽ¯ï¼ˆRNNï¼‰ï¼Œå®Œå…¨åŸºäºŽ**æ³¨æ„åŠ›æœºåˆ¶**ï¼ŒåŒæ—¶å¹¶è¡Œè®¡ç®—æ•ˆçŽ‡é«˜ï¼Œå¹¿æ³›åº”ç”¨äºŽè‡ªç„¶è¯­è¨€å¤„ç†å’Œè®¡ç®—æœºè§†è§‰ã€‚

Transformer ä¸»è¦åˆ†ä¸º**ç¼–ç å™¨ (Encoder)** å’Œ**è§£ç å™¨ (Decoder)** ä¸¤éƒ¨åˆ†ï¼Œæ•´ä½“ç”±å¤šä¸ªå †å çš„å­å±‚ç»„æˆã€‚

#### **Encoder ç»“æž„**
æ¯ä¸ª Encoder Layer åŒ…å«ï¼š

1. **å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ (Multi-Head Self Attention)**
2. **å‰å‘å…¨è¿žæŽ¥å±‚ (Feed-Forward Network, FFN)**
3. **æ®‹å·®è¿žæŽ¥ + å±‚å½’ä¸€åŒ– (Residual + LayerNorm)**

#### **Decoder ç»“æž„**
æ¯ä¸ª Decoder Layer å¤šäº†ä¸€ä¸ªæ¨¡å—ï¼ŒåŒ…å«ï¼š

1. **Masked å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ (Masked Multi-Head Self Attention)**
2. **Encoder-Decoder Attention**ï¼ˆç”¨äºŽå…³æ³¨ Encoder è¾“å‡ºï¼‰
3. **å‰å‘å…¨è¿žæŽ¥å±‚ (FFN)**
4. **æ®‹å·®è¿žæŽ¥ + å±‚å½’ä¸€åŒ–**

#### **æ ¸å¿ƒåŽŸç† â€” æ³¨æ„åŠ›æœºåˆ¶ (Attention)**
æ³¨æ„åŠ›æœºåˆ¶æœ¬è´¨ä¸Šé€šè¿‡**Query-Key-Value** è®¡ç®—åºåˆ—å†…éƒ¨å„ä¸ªè¯ä¹‹é—´çš„å…³ç³»æƒé‡ï¼š

```plain
Attention(Q, K, V) = softmax(QKáµ€ / âˆšd_k) * V
```

è¿™ä½¿å¾—æ¨¡åž‹å¯ä»¥åŠ¨æ€å…³æ³¨è¾“å…¥åºåˆ—ä¸­ä¸Žå½“å‰è¯æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚

#### **å¤šå¤´æœºåˆ¶ (Multi-Head)**
å°†æ³¨æ„åŠ›æœºåˆ¶å¹¶è¡Œåˆ†æˆå¤šä¸ªå­ç©ºé—´ï¼ˆå¤šä¸ªå¤´ï¼‰ï¼Œå¢žå¼ºæ¨¡åž‹æ•æ‰å¤šç²’åº¦ç‰¹å¾çš„èƒ½åŠ›ï¼Œæœ€åŽæ‹¼æŽ¥èžåˆã€‚

#### **ä½ç½®ç¼–ç  (Positional Encoding)**
å› ä¸º Transformer ä¸åƒ RNN æœ‰é¡ºåºæ€§ï¼Œä½ç½®ç¼–ç  (Positional Encoding) ç”¨äºŽå¼•å…¥åºåˆ—ä½ç½®ä¿¡æ¯ï¼Œé€šå¸¸é‡‡ç”¨æ­£ä½™å¼¦å‡½æ•°ã€‚

### **é¢è¯•å›žç­”**
> Transformer é€šè¿‡å †å çš„æ³¨æ„åŠ›æœºåˆ¶å’Œå‰å‘ç½‘ç»œï¼Œç»“åˆæ®‹å·®ä¸Žå½’ä¸€åŒ–ï¼Œèƒ½é«˜æ•ˆæ•æ‰é•¿è·ç¦»ä¾èµ–ï¼Œå¹¿æ³›ç”¨äºŽ NLP å’Œ CV ä»»åŠ¡ä¸­ã€‚Transformer åŽç»­å¯å‘äº† BERTï¼ˆåªç”¨ Encoderï¼‰ã€GPTï¼ˆåªç”¨ Decoderï¼‰ã€Vision Transformer (ViT) ç­‰æ¨¡åž‹ï¼Œæˆä¸ºçŽ°ä»£ AI åŸºç¡€æž¶æž„ä¹‹ä¸€ã€‚
>

## Transformerä¸ºä»€ä¹ˆå¯ä»¥å¹¶è¡Œ
### é—®é¢˜åˆ†æž
#### æ‘’å¼ƒ RNN ä¸­çš„ä¸²è¡Œä¾èµ–
+ RNN/LSTM å¿…é¡»æŒ‰æ—¶é—´æ­¥ä¸€ä¸ªä¸€ä¸ªå¤„ç†åºåˆ—ï¼ŒåŽä¸€ä¸ªä½ç½®ä¾èµ–å‰ä¸€ä¸ªä½ç½®çš„éšè—çŠ¶æ€ï¼Œ**æ— æ³•å¹¶è¡Œ**ã€‚
+ Transformer å®Œå…¨åŽ»é™¤äº†è¿™ç§æ—¶é—´æ­¥ä¾èµ–ï¼Œ**æ‰€æœ‰ä½ç½®å¯ä»¥åŒæ—¶è¿›è¡Œè®¡ç®—**ã€‚

#### è‡ªæ³¨æ„åŠ›æœºåˆ¶æ˜¯â€œå…¨å±€å¹¶è¡Œâ€çš„æ ¸å¿ƒ
+ åœ¨ Transformer ä¸­ï¼Œæ¯ä¸€ä¸ª token çš„è¡¨ç¤ºé€šè¿‡ **å¯¹æ•´å¥ä¸­çš„æ‰€æœ‰ token è¿›è¡ŒåŠ æƒæ±‚å’Œï¼ˆSelf-Attentionï¼‰** å¾—åˆ°ã€‚
+ è¿™äº›æ³¨æ„åŠ›æƒé‡çš„è®¡ç®—å¯ä»¥é€šè¿‡çŸ©é˜µæ“ä½œä¸€æ¬¡æ€§å®Œæˆã€‚

ðŸ“Œ ä¸¾ä¾‹ï¼š

> è¾“å…¥åºåˆ—é•¿åº¦ä¸º nï¼Œé‚£ä¹ˆ Self-Attention çš„è®¡ç®—æ˜¯é€šè¿‡ Q dot K^T å®žçŽ° n  çš„æƒé‡çŸ©é˜µï¼Œè¿™å¯ä»¥ä½¿ç”¨çŸ©é˜µä¹˜æ³•ä¸€æ¬¡æ€§å®Œæˆï¼Œå¤©ç„¶é€‚åˆ GPU å¹¶è¡Œã€‚
>

#### ä½ç½®ç¼–ç ç”¨äºŽè¡¥å……é¡ºåºä¿¡æ¯
+ Transformer æ²¡æœ‰é¡ºåºç»“æž„ï¼Œå› æ­¤ä½¿ç”¨ä½ç½®ç¼–ç ï¼ˆå¦‚æ­£ä½™å¼¦ä½ç½®ç¼–ç æˆ– RoPEï¼‰æä¾›åºåˆ—é¡ºåºä¿¡æ¯ã€‚
+ è¿™æ ·æ—¢ä¿æŒäº†å¹¶è¡Œè®¡ç®—ï¼Œåˆä¿ç•™äº†åºåˆ—å»ºæ¨¡èƒ½åŠ›ã€‚

#### å…¨éƒ¨é‡‡ç”¨çŸ©é˜µæ“ä½œï¼Œé€‚åˆ GPU/TPU åŠ é€Ÿ
+ Transformer ä¸­çš„æ³¨æ„åŠ›æœºåˆ¶ã€å‰é¦ˆç½‘ç»œï¼ˆFFNï¼‰ã€LayerNorm ç­‰æ¨¡å—éƒ½æ˜¯çŸ©é˜µæ“ä½œã€‚
+ çŸ©é˜µä¹˜æ³•æ˜¯ **çŽ°ä»£ç¡¬ä»¶å¹¶è¡ŒåŠ é€Ÿçš„æœ€ä¼˜åœºæ™¯**ï¼ˆæ¯”å¦‚ CUDA æ ¸å¿ƒå¯ä»¥å¤§è§„æ¨¡å¹¶å‘æ‰§è¡Œï¼‰ã€‚

### é¢è¯•å›žç­”
> Transformer ä¹‹æ‰€ä»¥èƒ½å¤Ÿå¾ˆå¥½åœ°å¹¶è¡Œï¼Œæ˜¯å› ä¸ºå®ƒæ‘’å¼ƒäº†å¾ªçŽ¯ç»“æž„ï¼Œé‡‡ç”¨äº†è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆSelf-Attentionï¼‰ï¼Œå¯ä»¥è®©æ¯ä¸ªä½ç½®åŒæ—¶çœ‹åˆ°å…¨å±€ä¿¡æ¯ï¼Œå› æ­¤è®­ç»ƒæ—¶å¯ä»¥ç”¨çŸ©é˜µæ“ä½œè¿›è¡Œå®Œå…¨å¹¶è¡Œï¼Œéžå¸¸é€‚åˆ GPU åŠ é€Ÿï¼Œå¯ä»¥åŒæ—¶å¤„ç†æ•´ä¸ªåºåˆ—ä¸­æ‰€æœ‰ä½ç½®çš„è¾“å…¥ï¼Œä»Žè€Œå¤§å¤§æå‡äº†è®­ç»ƒå’ŒæŽ¨ç†çš„å¹¶è¡Œæ•ˆçŽ‡ã€‚
>

## RNN
### é—®é¢˜åˆ†æž
RNNï¼ˆRecurrent Neural Networkï¼‰æ˜¯ä¸€ç§**å¾ªçŽ¯ç¥žç»ç½‘ç»œ**ï¼Œä¸“é—¨ç”¨äºŽå¤„ç†**åºåˆ—æ•°æ®**ï¼Œç‰¹ç‚¹æ˜¯é€šè¿‡éšè—çŠ¶æ€ (Hidden State) æ•æ‰åºåˆ—ä¸­çš„æ—¶åºå…³ç³»ã€‚

RNN é€šè¿‡éšè—çŠ¶æ€é€’å½’ä¼ é€’ä¿¡æ¯ï¼Œæ•æ‰åºåˆ—ä¾èµ–æ€§ï¼Œä½†å­˜åœ¨é•¿ç¨‹ä¾èµ–å›°éš¾å’Œæ•ˆçŽ‡ä½Žçš„é—®é¢˜ï¼ŒåŽç»­å¦‚ LSTM å’Œ Transformer é€æ­¥è§£å†³äº†è¿™äº›ä¸è¶³ã€‚  
RNN é€æ­¥å¤„ç†åºåˆ—ï¼Œä¸èƒ½å¹¶è¡Œï¼Œæ•æ‰é•¿è·ç¦»ä¾èµ–å›°éš¾ï¼›Transformer ç”¨ Attention æœºåˆ¶å…¨å±€å»ºæ¨¡å…³ç³»ï¼Œæ”¯æŒå¹¶è¡Œï¼Œæ•ˆæžœæ›´å¼ºã€‚

#### RNN ç»„æˆéƒ¨åˆ†ä½œç”¨è¡¨
| æ¨¡å— | ä½œç”¨ |
| --- | --- |
| **è¾“å…¥å±‚ (Input)** | è¾“å…¥å½“å‰æ—¶åˆ»å•è¯/æ•°æ®çš„å‘é‡è¡¨ç¤º |
| **éšè—çŠ¶æ€ (Hidden State)** | **è®°å¿†ä¸Šä¸€ä¸ªæ—¶åˆ»çš„ä¿¡æ¯**ï¼Œå¹¶ä¸Žå½“å‰è¾“å…¥ç»“åˆï¼Œæ•æ‰åºåˆ—ä¾èµ–å…³ç³» |
| **æƒé‡çŸ©é˜µ (Weights)** | æŽ§åˆ¶è¾“å…¥å’Œéšè—çŠ¶æ€å¦‚ä½•å½±å“å½“å‰çŠ¶æ€ï¼›æ¨¡åž‹å‚æ•° |
| **è¾“å‡ºå±‚ (Output)** | è¾“å‡ºå½“å‰æ—¶åˆ»é¢„æµ‹ç»“æžœ (å¦‚åˆ†ç±»æ¦‚çŽ‡ã€ç”Ÿæˆè¯åˆ†å¸ƒ) |


**æ ¸å¿ƒè®¡ç®—å…¬å¼**

```plain
hâ‚œ = f(Wâ‚• * hâ‚œâ‚‹â‚ + Wâ‚“ * xâ‚œ + b)  
```

> å½“å‰éšè—çŠ¶æ€ hâ‚œ ç”±**å‰ä¸€ä¸ªéšè—çŠ¶æ€ hâ‚œâ‚‹â‚ + å½“å‰è¾“å…¥ xâ‚œ**å…±åŒå†³å®š  
f é€šå¸¸æ˜¯ **tanh** æˆ– **ReLU** æ¿€æ´»å‡½æ•°
>

#### RNN ä½œç”¨å£è¯€å¼æ€»ç»“
> **ä¸€å¥è¯**ï¼šRNN é€šè¿‡éšè—çŠ¶æ€ h è®©æ¨¡åž‹æœ‰ã€Œè®°å¿†ã€ï¼Œæ•æ‰**æ—¶é—´ä¾èµ–å…³ç³»**
>

**æ¯ä¸ªæ—¶é—´æ­¥åš 3 ä»¶äº‹ï¼š**  
1ï¸âƒ£ è¯»å½“å‰è¾“å…¥  
2ï¸âƒ£ ç»“åˆä¸Šä¸€æ­¥éšè—çŠ¶æ€  
3ï¸âƒ£ è¾“å‡ºå½“å‰ç»“æžœ & æ›´æ–°éšè—çŠ¶æ€

### **é¢è¯•å›žç­”**
> RNNï¼ˆRecurrent Neural Networkï¼‰æ˜¯ä¸€ç§**å¾ªçŽ¯ç¥žç»ç½‘ç»œ**ï¼Œä¸“é—¨ç”¨äºŽå¤„ç†**åºåˆ—æ•°æ®**ï¼Œç‰¹ç‚¹æ˜¯é€šè¿‡éšè—çŠ¶æ€ (Hidden State) æ•æ‰åºåˆ—ä¸­çš„æ—¶åºå…³ç³»ã€‚ä¼˜ç‚¹æ˜¯èƒ½å¤„ç†åºåˆ—æ•°æ®ï¼Œæœ‰ã€Œè®°å¿†èƒ½åŠ›ã€ï¼Œç¼ºç‚¹æ˜¯è®¡ç®—ä¸èƒ½å¹¶è¡Œï¼Œé•¿åºåˆ—æ˜“æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸
>

## LSTMå’ŒGRU
### é—®é¢˜åˆ†æž
LSTMï¼ˆé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼‰å’Œ GRUï¼ˆé—¨æŽ§å¾ªçŽ¯å•å…ƒï¼‰æ˜¯å¯¹ä¼ ç»Ÿ RNN çš„ä¼˜åŒ–ï¼Œå®ƒä»¬é€šè¿‡å¼•å…¥**é—¨æŽ§æœºåˆ¶**æ¥è§£å†³ RNN åœ¨å¤„ç†é•¿åºåˆ—æ—¶å‡ºçŽ°çš„**æ¢¯åº¦æ¶ˆå¤±**å’Œ**æ¢¯åº¦çˆ†ç‚¸**é—®é¢˜ï¼Œä»Žè€Œæ›´æœ‰æ•ˆåœ°å­¦ä¹ é•¿æœŸä¾èµ–å…³ç³»ã€‚é¢è¯•æ—¶ï¼Œä½ å¯ä»¥ä»Žè¿™ä¸¤ä¸ªæ¨¡åž‹çš„ç»“æž„ã€è®¾è®¡åŠ¨æœºå’Œç›¸å¯¹äºŽä¼ ç»Ÿ RNN çš„æ”¹è¿›æ¥å›žç­”ã€‚

### **1. LSTMï¼ˆé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼‰**
LSTM æ˜¯ç”± Sepp Hochreiter å’Œ JÃ¼rgen Schmidhuber äºŽ 1997 å¹´æå‡ºçš„ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å¼•å…¥äº†**è®°å¿†å•å…ƒ**å’Œä¸‰ä¸ª**é—¨æŽ§æœºåˆ¶**ï¼Œä½¿å¾—ä¿¡æ¯åœ¨ç½‘ç»œä¸­å¯ä»¥æœ‰æ•ˆåœ°ä¿å­˜æˆ–å¿˜è®°ï¼Œé¿å…äº† RNN åœ¨é•¿åºåˆ—ä¸­è®­ç»ƒæ—¶å‡ºçŽ°çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚

#### **LSTM çš„ä¸»è¦ç»„æˆéƒ¨åˆ†**ï¼š
+ **è®°å¿†å•å…ƒï¼ˆCell Stateï¼‰**ï¼šä½œä¸ºä¿¡æ¯æµçš„ä¸»è¦è½½ä½“ï¼Œè®°å¿†å•å…ƒå­˜å‚¨äº†é•¿æœŸçš„ä¿¡æ¯ã€‚ä¿¡æ¯å¯ä»¥åœ¨æ•´ä¸ªåºåˆ—ä¸­æ²¿ç€è®°å¿†å•å…ƒä¼ é€’ã€‚
+ **ä¸‰ä¸ªé—¨**ï¼š
    1. **é—å¿˜é—¨ (Forget Gate)**ï¼šå†³å®šä¿ç•™å‰ä¸€æ—¶åˆ»çš„è®°å¿†å¤šå°‘ã€‚é€šè¿‡ sigmoid å‡½æ•°å†³å®šé—å¿˜å¤šå°‘ä¿¡æ¯ï¼Œå€¼ä¸º 0 æ—¶å®Œå…¨å¿˜è®°ï¼Œå€¼ä¸º 1 æ—¶å®Œå…¨ä¿ç•™ã€‚
    2. **è¾“å…¥é—¨ (Input Gate)**ï¼šå†³å®šå½“å‰è¾“å…¥ ![image](https://cdn.nlark.com/yuque/__latex/21c4616d966dca0cdc4d982b04f94933.svg) å¯¹è®°å¿†å•å…ƒçš„æ›´æ–°é‡ã€‚å®ƒé€šè¿‡ sigmoid å‡½æ•°æŽ§åˆ¶å“ªäº›ä¿¡æ¯åº”è¯¥è¢«æ›´æ–°ï¼Œä»¥åŠé€šè¿‡ tanh å‡½æ•°ç”Ÿæˆæ–°çš„å€™é€‰è®°å¿†ã€‚
    3. **è¾“å‡ºé—¨ (Output Gate)**ï¼šå†³å®šå½“å‰è®°å¿†å•å…ƒçš„è¾“å‡ºé‡ã€‚é€šè¿‡ sigmoid å‡½æ•°æŽ§åˆ¶å“ªäº›ä¿¡æ¯å¯ä»¥è¾“å‡ºï¼Œç»“åˆå½“å‰è®°å¿†å•å…ƒçš„çŠ¶æ€ï¼Œå†³å®šæœ€ç»ˆçš„è¾“å‡ºã€‚

#### **LSTM çš„ä¼˜åŠ¿**ï¼š
+ **é˜²æ­¢æ¢¯åº¦æ¶ˆå¤±**ï¼šLSTM é€šè¿‡è®°å¿†å•å…ƒä¸­çš„â€œé•¿æœŸè·¯å¾„â€å‡å°‘äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œä½¿å¾—æ¢¯åº¦èƒ½å¤Ÿæ›´å®¹æ˜“åœ°æµåŠ¨ã€‚
+ **æ›´å¼ºçš„é•¿æœŸä¾èµ–å­¦ä¹ èƒ½åŠ›**ï¼šå®ƒèƒ½å¤Ÿå­˜å‚¨å’Œè°ƒæ•´é•¿æœŸä¿¡æ¯ï¼Œä½¿å¾— LSTM èƒ½å¤Ÿå¤„ç†æ›´é•¿çš„åºåˆ—æ•°æ®ã€‚

### **LSTM çš„çŠ¶æ€æ›´æ–°å…¬å¼**ï¼š
![image](https://cdn.nlark.com/yuque/__latex/4d1398e4e9790cbe491702f4843ea2de.svg)

![image](https://cdn.nlark.com/yuque/__latex/a6fa5b57ae7cea75298ef6e6a5e41b52.svg)

![image](https://cdn.nlark.com/yuque/__latex/d0653b3eb1163a658a499b2e5d6026ab.svg)

![image](https://cdn.nlark.com/yuque/__latex/6d0880ef1c9b3505a4257acf0a79ec98.svg)

![image](https://cdn.nlark.com/yuque/__latex/9efc103419dd733627335fc2856b1f1f.svg)

![image](https://cdn.nlark.com/yuque/__latex/c6a5f65a01cd955a76aa5eb5c8222431.svg)

### **2. GRUï¼ˆé—¨æŽ§å¾ªçŽ¯å•å…ƒï¼‰**
GRU æ˜¯ Cho ç­‰äººäºŽ 2014 å¹´æå‡ºçš„ï¼Œæ˜¯å¯¹ LSTM çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œæ—¨åœ¨å‡å°‘æ¨¡åž‹çš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä»èƒ½æœ‰æ•ˆå¤„ç†é•¿æœŸä¾èµ–é—®é¢˜ã€‚GRU åœ¨ç»“æž„ä¸Šåªæœ‰ä¸¤ä¸ªé—¨ï¼Œåˆ†åˆ«æ˜¯**æ›´æ–°é—¨**å’Œ**é‡ç½®é—¨**ï¼Œç›¸æ¯” LSTM å‡å°‘äº†è®¡ç®—é‡å’Œå‚æ•°ã€‚

#### **GRU çš„ä¸»è¦ç»„æˆéƒ¨åˆ†**ï¼š
+ **æ›´æ–°é—¨ (Update Gate)**ï¼šå†³å®šäº†å‰ä¸€æ—¶åˆ»çš„éšè—çŠ¶æ€ ![image](https://cdn.nlark.com/yuque/__latex/fe8efef06f21db580f77c6f95bdcfdc9.svg) ä¸Žå½“å‰æ—¶åˆ»çš„å€™é€‰éšè—çŠ¶æ€ ![image](https://cdn.nlark.com/yuque/__latex/cb44739842a0bf855cac5f3e09833156.svg) çš„æ¯”ä¾‹ï¼Œå³æŽ§åˆ¶äº†è®°å¿†çš„æ›´æ–°é‡ã€‚
+ **é‡ç½®é—¨ (Reset Gate)**ï¼šå†³å®šäº†å‰ä¸€æ—¶åˆ»çš„éšè—çŠ¶æ€ ![image](https://cdn.nlark.com/yuque/__latex/fe8efef06f21db580f77c6f95bdcfdc9.svg) å¯¹å½“å‰æ—¶åˆ»è¾“å…¥çš„å½±å“ï¼ŒæŽ§åˆ¶é—å¿˜çš„æ¯”ä¾‹ã€‚

#### **GRU çš„ä¼˜åŠ¿**ï¼š
+ **ç®€åŒ–äº†æ¨¡åž‹**ï¼šç›¸è¾ƒäºŽ LSTMï¼ŒGRU æ²¡æœ‰è®°å¿†å•å…ƒå’Œè¾“å‡ºé—¨ï¼Œè®¡ç®—é‡å’Œå‚æ•°è¾ƒå°‘ï¼Œä½†ä»èƒ½æœ‰æ•ˆåœ°æ•æ‰é•¿è·ç¦»çš„ä¾èµ–å…³ç³»ã€‚
+ **æ›´å¿«çš„è®­ç»ƒé€Ÿåº¦**ï¼šç”±äºŽæ¨¡åž‹ç»“æž„æ›´ç®€å•ï¼ŒGRU é€šå¸¸æ¯” LSTM æ›´å®¹æ˜“è®­ç»ƒï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®é‡è¾ƒå°æˆ–è®¡ç®—èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ã€‚

### **GRU çš„çŠ¶æ€æ›´æ–°å…¬å¼**ï¼š
![image](https://cdn.nlark.com/yuque/__latex/26ae282a99d1586d8047a06cb5ff865f.svg)

![image](https://cdn.nlark.com/yuque/__latex/c8fa720e8a54f904834a2b67166d4f66.svg)

![image](https://cdn.nlark.com/yuque/__latex/e03e0353f47f64dccefc2794519c6f4a.svg)

![image](https://cdn.nlark.com/yuque/__latex/49074efc7e60b6d064e7738fe26952fc.svg)

### **LSTM å’Œ GRU ç›¸æ¯”äºŽ RNN çš„ä¼˜åŒ–**
+ **æ¢¯åº¦æ¶ˆå¤±é—®é¢˜**ï¼šRNN åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯å¤„ç†é•¿åºåˆ—æ—¶ï¼Œä¼šé‡åˆ°æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚LSTM å’Œ GRU éƒ½é€šè¿‡å¼•å…¥é—¨æŽ§æœºåˆ¶ï¼Œæœ‰æ•ˆåœ°ä¿ç•™äº†é‡è¦ä¿¡æ¯ï¼Œå¹¶æŽ§åˆ¶äº†ä¿¡æ¯çš„é—å¿˜ï¼Œç¼“è§£äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚
+ **é•¿æœŸä¾èµ–å­¦ä¹ **ï¼šLSTM é€šè¿‡å…¶å¤æ‚çš„é—¨æŽ§æœºåˆ¶ï¼ˆå¦‚é—å¿˜é—¨å’Œè¾“å…¥é—¨ï¼‰èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰é•¿æœŸä¾èµ–ï¼Œè€Œ GRU ç”¨å…¶ç®€å•çš„æ›´æ–°é—¨å’Œé‡ç½®é—¨ä¹Ÿèƒ½æœ‰æ•ˆåœ°æ•æ‰é•¿æœŸä¾èµ–ã€‚
+ **è®¡ç®—æ•ˆçŽ‡**ï¼šLSTM æ¨¡åž‹è¾ƒå¤æ‚ï¼Œå‚æ•°è¾ƒå¤šï¼Œè®­ç»ƒæ—¶é—´è¾ƒé•¿ï¼›è€Œ GRU çš„ç»“æž„è¾ƒç®€å•ï¼Œè®¡ç®—æ•ˆçŽ‡è¾ƒé«˜ã€‚

### **é¢è¯•å›žç­”**
> LSTM å’Œ GRU æ˜¯å¯¹ä¼ ç»Ÿ RNN çš„ä¼˜åŒ–ï¼Œå®ƒä»¬ä¸»è¦é€šè¿‡å¼•å…¥é—¨æŽ§æœºåˆ¶æ¥è§£å†³ RNN åœ¨é•¿åºåˆ—å­¦ä¹ ä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚
>
> + LSTM é€šè¿‡**é—å¿˜é—¨**ã€**è¾“å…¥é—¨**å’Œ**è¾“å‡ºé—¨**æ¥æŽ§åˆ¶ä¿¡æ¯çš„ä¼ é€’å’Œæ›´æ–°ï¼Œä»Žè€Œæœ‰æ•ˆæ•æ‰é•¿æœŸä¾èµ–ã€‚
> + GRU åˆ™é€šè¿‡**æ›´æ–°é—¨**å’Œ**é‡ç½®é—¨**ç®€åŒ–äº†æ¨¡åž‹ç»“æž„ï¼Œå‡å°‘äº†è®¡ç®—é‡ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå®ƒä¾ç„¶èƒ½å¤Ÿæœ‰æ•ˆåœ°æ•æ‰é•¿è·ç¦»ä¾èµ–ã€‚
>
> è¿™ä¸¤ç§æ¨¡åž‹ç›¸æ¯”äºŽä¼ ç»Ÿ RNNï¼Œèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°å­¦ä¹ å’Œè®°å¿†é•¿æœŸä¾èµ–ï¼Œå¹¶ä¸”æé«˜äº†è®­ç»ƒæ•ˆçŽ‡ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†é•¿åºåˆ—æ•°æ®æ—¶è¡¨çŽ°æ›´ä¸ºå‡ºè‰²ã€‚
>

## ä»€ä¹ˆæ˜¯embedding
### é—®é¢˜åˆ†æž
Embedding æ˜¯ä¸€ç§å°†ç¦»æ•£çš„ã€éžè¿žç»­çš„æ•°æ®ï¼ˆå¦‚è¯ã€ç±»åˆ«ï¼‰æ˜ å°„ä¸ºè¿žç»­ã€ä½Žç»´ç¨ å¯†å‘é‡çš„æ–¹å¼ï¼Œä½¿æ¨¡åž‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å’Œå¤„ç†è¿™äº›æ•°æ®ã€‚

#### 1ï¸âƒ£ ä¸ºä»€ä¹ˆéœ€è¦ Embeddingï¼Ÿ
+ æœºå™¨å­¦ä¹ æ¨¡åž‹åªèƒ½å¤„ç†æ•°å€¼åž‹æ•°æ®ã€‚
+ æ–‡æœ¬ä¸­çš„è¯è¯­ã€å›¾åƒä¸­çš„ç±»åˆ«æ ‡ç­¾æœ¬è´¨ä¸Šæ˜¯ç¦»æ•£ç¬¦å·ï¼ˆå¦‚â€œçŒ«â€ã€â€œäººâ€ã€â€œè·‘â€ï¼‰ã€‚
+ æˆ‘ä»¬ä¸èƒ½ç›´æŽ¥ç”¨ "one-hot" ç¼–ç ï¼šç»´åº¦é«˜ã€ç¨€ç–ä¸”ä¸èƒ½è¡¨è¾¾è¯­ä¹‰å…³ç³»ã€‚

#### 2ï¸âƒ£ Embedding æ˜¯æ€Žä¹ˆåšçš„ï¼Ÿ
+ ç”¨ä¸€ä¸ª**å¯å­¦ä¹ çš„æŸ¥æ‰¾è¡¨ï¼ˆçŸ©é˜µï¼‰**ï¼Œå°†æ¯ä¸ªè¯æˆ–ç±»åˆ«æ˜ å°„ä¸ºä¸€ä¸ªä½Žç»´ç¨ å¯†å‘é‡ã€‚
+ å‡è®¾è¯è¡¨å¤§å°ä¸º `V`ï¼Œembedding ç»´åº¦ä¸º `d`ï¼Œé‚£ä¹ˆ embedding çŸ©é˜µæ˜¯ `V Ã— d`ã€‚
+ æ¯ä¸ªè¯çš„ embedding æ˜¯è¿™ä¸ªçŸ©é˜µä¸­å¯¹åº”è¡Œçš„å‘é‡ã€‚

#### 3ï¸âƒ£ Embedding çš„ä¼˜åŠ¿ï¼š
| ç‰¹æ€§ | æè¿° |
| --- | --- |
| **ç¨ å¯†ä½Žç»´** | èŠ‚çœå†…å­˜ï¼Œæé«˜è®¡ç®—æ•ˆçŽ‡ |
| **å¯å­¦ä¹ ** | åœ¨è®­ç»ƒä¸­å¯ä»¥è‡ªåŠ¨è°ƒæ•´å‘é‡ï¼Œä½¿ç›¸ä¼¼è¯é è¿‘ |
| **ä¿ç•™è¯­ä¹‰å…³ç³»** | â€œking - man + woman â‰ˆ queenâ€ æ˜¯ Word2Vec çš„ç»å…¸ç¤ºä¾‹ |
| **æ”¯æŒè¿ç§»å­¦ä¹ ** | å¯ä»¥ç”¨é¢„è®­ç»ƒ embeddingï¼Œå¦‚ Word2Vecã€GloVeã€BERT embedding |


#### 4ï¸âƒ£ å¸¸è§åº”ç”¨åœºæ™¯ï¼š
+ è‡ªç„¶è¯­è¨€å¤„ç†ï¼šè¯åµŒå…¥ï¼ˆword embeddingï¼‰ã€å¥å­åµŒå…¥ã€æ®µè½åµŒå…¥
+ æŽ¨èç³»ç»Ÿï¼šç”¨æˆ· IDã€å•†å“ ID çš„ embedding
+ å›¾ç¥žç»ç½‘ç»œï¼šèŠ‚ç‚¹ embedding

### é¢è¯•å›žç­”
> Embedding æ˜¯ä¸€ç§å°†ç¦»æ•£å˜é‡è½¬åŒ–ä¸ºæ¨¡åž‹å¯ä»¥ç†è§£çš„è¿žç»­å‘é‡çš„æŠ€æœ¯ï¼Œæ—¢æé«˜äº†è¡¨è¾¾èƒ½åŠ›ï¼Œåˆä¸ºç¥žç»ç½‘ç»œæä¾›äº†æ›´å¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œæ˜¯æ·±åº¦å­¦ä¹ ä¸­éžå¸¸æ ¸å¿ƒçš„ä¸€é¡¹æŠ€æœ¯ã€‚
>
